<html>
<body>
<canvas id="canvas" width="1800" height="1800">s</canvas>
<script>

function node(name, access_count) {
	this.children=[];
	this.name=name;
	this.access_count=access_count;
	this.parent=null;
}


node.prototype.add_child=function(child) {
  this.children.push(child);	
  child.parent=this;
}


node.prototype.get_qname=function() {
   var qname="";
	if (this.parent == null) {
		 qname=this.name;
	} else {
		 qname=this.parent.get_qname() + '.' + this.name;
	}
	return qname
}

function draw_node(node, canvas, x, y, size, total) {
	var ctx = canvas.getContext("2d");
	ctx.fillStyle = "rgba(255,0,0," + (node.access_count / total) + ")";
	ctx.beginPath();
	ctx.rect(x, y, size, size);
	ctx.closePath();
	ctx.fill();
	
	ctx.fillStyle    = "rgba(0,0,0," + (node.access_count / total) + ")"
	ctx.font         = 'italic ' + (size / 3) + 'px sans-serif';
	ctx.textBaseline = 'top';
	ctx.fillText  (node.name + " (" + node.access_count + ")" , x + 2, y + 2);
	
	
	var my_children = node.children;
	var y_offset=my_children.length;
	
	var i;
	var child_y_offset=0;
	for (i=0; i < my_children.length; i++) {
		child_y_offset+=draw_node(my_children[i], canvas, x + size, y + (size * (child_y_offset+1 +i)), size, total);
	}
	return y_offset;
	
}






bat=new node("bat", 5); 
foo=new node("foo", 7);
bar=new node("bar", 12);
bong=new node("bong", 2);
bing=new node("bing", 2);  
com=new node("com", 14);

com.add_child(bar);
com.add_child(bong);
bong.add_child(bing);
bar.add_child(foo);
bar.add_child(bat);


draw_node(com, canvas, 10, 10, 100, 14);
</script>
</body>
</html>